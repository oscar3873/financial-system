{% extends "core/base.html" %} {% block content %} {% load static %}

{% if commissions %}
        <table class="table table-striped table-hover">
            <thead class="table-light">
                <tr>
                    {% for name_prop in properties %}
                    <th scope="col">{{name_prop}}</th>
                    {% endfor %} {% if user.is_superuser %}
                    <th scope="col">Acciones</th>
                    {% endif %}

                </tr>
            </thead>
            <tbody>
                {% for commission in commissions %}
                <tr>
                    <td>{{commission.amount}}</td>
                    <td>{{commission.type}}</td>
                    <td>{{commission.created_at}}</td>
                    <td>{{commission.detail|default_if_none:'-'}} </td>
                    {% if user.is_superuser %}
                    <td>
                        <a type="button" class="btn" data-toggle="modal" data-target="#exampleModal{{commission.pk}}"><i class="fa-solid text-success fa-flag-checkered"></i> &nbsp;</a>
                        <!--Modal-->
                        <div class="modal fade" id="exampleModal{{commission.pk}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel{{commission.pk}}" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <form action="{% url 'advisers:pay_commission' commission.pk %}" method="POST">
                                        {% csrf_token %}
                                        <div class="modal-header">
                                            <h4 class="modal-title" id="exampleModalLabel">Eliminar Cliente</h4>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <span>Pago comision a</span>
                                            <strong>{{ commission.adviser }} </strong>?

                                            <strong>{{ commission.amount }} </strong>

                                            <strong>{{ commission.type }} </strong>

                                            <strong>{{ commission.detail }} </strong>
                                        </div>
                                        <div class="modal-footer">
                                            <button class="btn btn-success">Confirmar</button>
                                            <button type="button" class="btn btn-info m-2 rounded p-2" data-dismiss="modal">Cerrar</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <!--End Modal-->
                    </td>
                    {% endif %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
{% endif %}
{% endblock content %}